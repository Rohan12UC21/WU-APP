@page
@model IndexModel

@{
    ViewData["Title"] = "Index";
    
}

<style>

    .tabset > input[type="radio"] {
        position: absolute;
        left: -200vw;
    }

    .tabset .tab-panel {
        width: 100%;
        display: none;
    }

    .tabset > input:first-child:checked ~ .tab-panels > .tab-panel:first-child,
    .tabset > input:nth-child(3):checked ~ .tab-panels > .tab-panel:nth-child(2),
    .tabset > input:nth-child(5):checked ~ .tab-panels > .tab-panel:nth-child(3),
    .tabset > input:nth-child(7):checked ~ .tab-panels > .tab-panel:nth-child(4),
    .tabset > input:nth-child(9):checked ~ .tab-panels > .tab-panel:nth-child(5),
    .tabset > input:nth-child(11):checked ~ .tab-panels > .tab-panel:nth-child(6) {
        display: block;
    }


    .tabset > label {
        position: relative;
        display: inline-block;
        padding: 5px 15px 15px;
        border: 1px solid transparent;
        border-bottom: 0;
        cursor: pointer;
        font-weight: 600;
    }

        .tabset > label::after {
            content: "";
            position: absolute;
            left: 15px;
            bottom: 5px;
            width: 22px;
            height: 4px;
            background: #8d8d8d;
        }

        .tabset > label:hover,
        .tabset > input:focus + label {
            color: #06c;
        }

            .tabset > label:hover::after,
            .tabset > input:focus + label::after,
            .tabset > input:checked + label::after {
                background: #06c;
            }

    .tabset > input:checked + label {
        border-color: #ccc;
        border-bottom: 1px solid #fff;
        margin-bottom: -1px;
    }

    .tab-panel {
        padding: 10px 0;
        border-top: 5px solid #ccc;
        width: 100%;
    }

    .form-style-2 {
        width: 100%;
        padding: 20px 12px 10px 20px;
        font: 13px Arial, Helvetica, sans-serif;
    }

    .form-style-2-heading {
        font-weight: bold;
        font-style: italic;
        border-bottom: 2px solid #ddd;
        margin-bottom: 20px;
        font-size: 15px;
        padding-bottom: 3px;
    }

    .form-style-2 label {
        display: block;
        margin: 0px 0px 15px 0px;
    }

        .form-style-2 label > span {
            width: 100px;
            font-weight: bold;
            float: left;
            padding-top: 8px;
            padding-right: 5px;
        }

    .form-style-2 span.required {
        color: red;
    }

    .form-style-2 .tel-number-field {
        width: 40px;
        text-align: center;
    }

    .form-style-2 input.input-field, .form-style-2 .select-field {
        width: 48%;
    }

    .form-style-2 input.input-field,
    .form-style-2 .tel-number-field,
    .form-style-2 .textarea-field,
    .form-style-2 .select-field {
        box-sizing: border-box;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        border: 1px solid #C2C2C2;
        box-shadow: 1px 1px 4px #EBEBEB;
        -moz-box-shadow: 1px 1px 4px #EBEBEB;
        -webkit-box-shadow: 1px 1px 4px #EBEBEB;
        border-radius: 3px;
        -webkit-border-radius: 3px;
        -moz-border-radius: 3px;
        padding: 7px;
        outline: none;
    }

        .form-style-2 .input-field:focus,
        .form-style-2 .tel-number-field:focus,
        .form-style-2 .textarea-field:focus,
        .form-style-2 .select-field:focus {
            border: 1px solid #848484;
        }

    .form-style-2 .textarea-field {
        height: 100px;
        width: 55%;
    }

    .form-style-2 input[type=submit],
    .form-style-2 input[type=reset],
    .form-style-2 input[type=button],
    .form-style-2 a {
        border: none;
        padding: 8px 15px 8px 15px;
        background: #0069af;
        color: #fff;
        box-shadow: 1px 1px 4px #DADADA;
        -moz-box-shadow: 1px 1px 4px #DADADA;
        -webkit-box-shadow: 1px 1px 4px #DADADA;
        border-radius: 3px;
        -webkit-border-radius: 3px;
        -moz-border-radius: 3px;
    }

        .form-style-2 input[type=submit]:hover,
        .form-style-2 input[type=reset]:hover,
        .form-style-2 input[type=button]:hover,
        .form-style-2 a:hover {
            background: #00558e;
            color: #fff;
        }

    .formstyle input[type=submit],
    .formstyle input[type=reset],
    .formstyle input[type=button],
    .formstyle button,
    .formstyle a {
        border: none;
        padding: 8px 15px 8px 5px;
        background: #0069af;
        color: #fff;
        box-shadow: 1px 1px 4px #DADADA;
        -moz-box-shadow: 1px 1px 4px #DADADA;
        -webkit-box-shadow: 1px 1px 4px #DADADA;
        border-radius: 3px;
        -webkit-border-radius: 3px;
        -moz-border-radius: 3px;
    }

        .formstyle input[type=submit]:hover,
        .formstyle input[type=reset]:hover,
        .formstyle input[type=button]:hover,
        .formstyle button:hover,
        .formstyle a:hover {
            background: #00558e;
            color: #fff;
        }

    .formstyle a {
        font: bold;
        padding: 8px 18px 11px 7px;
        text-align: center;
        clear: both;
    }

    .sub-entry {
        width: 50%;
        float: left;
    }

    .button {
        text-align: center;
        padding-top: 20px;
        clear: both;
    }

    .dropdown-check-list {
        display: inline-block;
    }

        .dropdown-check-list .anchor {
            position: relative;
            cursor: pointer;
            display: inline-block;
            padding: 5px 50px 5px 10px;
            border: 1px solid #ccc;
        }

            .dropdown-check-list .anchor:after {
                position: absolute;
                content: "";
                border-left: 2px solid black;
                border-top: 2px solid black;
                padding: 5px;
                right: 10px;
                top: 20%;
                -moz-transform: rotate(-135deg);
                -ms-transform: rotate(-135deg);
                -o-transform: rotate(-135deg);
                -webkit-transform: rotate(-135deg);
                transform: rotate(-135deg);
            }

            .dropdown-check-list .anchor:active:after {
                right: 8px;
                top: 21%;
            }

        .dropdown-check-list ul.items {
            padding: 2px;
            display: none;
            margin: 0;
            border: 1px solid #ccc;
            border-top: none;
        }

            .dropdown-check-list ul.items li {
                list-style: none;
            }

        .dropdown-check-list.visible .anchor {
            color: #0094ff;
        }

        .dropdown-check-list.visible .items {
            display: block;
        }
    

    tr:hover {
        background-color: #e8e8e8;
    }

    table {
        width: 100%;
    }
</style>


<br>
<br>
<br>


<h1>Windows Update History</h1>


<form method="post" action="">
    <div class="formstyle">
        <label><button type="submit" id="btnSave" value="Save as Html" class="button"><img src="~/images/save.png" alt="example" width="20" height="20" />&nbsp;&nbsp;Save</button></label>
    </div>
</form>


<div>
    <div class="form-style-2-heading">Filter your results</div>
    <form method="get" action="">
        <div class="form-style-2">
            <div class="sub-entry">
                <label for="field1">
                    <span>Test Results</span><select id="testresult" class="select-field" asp-for="SelectedResult" asp-items="Model.ResultList">
                        <option value="">All</option>
                    </select>
                </label>
                <label for="KBID"><span>KBID:</span><input id="kbid" class="input-field" type="text" asp-for="SearchKBID" placeholder="" /></label>
                <label for="Date">
                    <span>Date:</span>
                    <input id="date" class="input-field" type="text" asp-for="datefilter" name="datefilter" />
                </label>
            </div>
            <div class="sub-entry">
                <label for="ICW"><span>ICW:</span><input id="icw" class="input-field" type="text" asp-for="SearchICW" placeholder="" /></label>
                <label for="Server">
                    <span>Server:</span><select id="server" class="select-field" asp-for="SelectedServer" asp-items="Model.ServerList">
                        <option value="">All</option>
                    </select>
                </label>
            </div>
        </div>
        <div class="formstyle">
            <label><button type="submit" id="btnFilter" value="Filter" class="button"><img src="~/images/filter.png" alt="example" width="20" height="20" />&nbsp; Filter</button></label>
            <label><a class="button" id="btnClear" asp-page="/Infos/Index"><img src="~/images/clear.png" alt="example" width="20" height="20" />&nbsp; Clear</a></label>
        </div>
    </form>
</div>



<br>
<br>



<div class="tabset">
    <!-- Tab 1 -->
    <input type="radio" name="tabset" id="tab1" aria-controls="All" checked>
    <label for="tab1">All</label>
    <!-- Tab 2 -->
    <input type="radio" name="tabset" id="tab2" aria-controls="Failed">
    <label for="tab2">Failed</label>

    <div class="tab-panels">

        <section id="All" class="tab-panel">

            <!-- Table 1 -->
            <table class="table">
                <thead>
                    <tr>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].Server)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].KBID)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].MSRCSeverity)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].Classification)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].Title)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].ICW)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].LastReleased)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].UpdateStatus)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].TestResults)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].TestDate)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].Reason)
                        </th>

                        <th></th>
                    </tr>
                </thead>
                <tbody>
                   @foreach (var item in Model.Info.OrderBy(z=> z.Server).ThenBy(x => x.TestResults).ThenByDescending(y => y.TestDate))
                    {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Server)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.KBID)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.MSRCSeverity)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Classification)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Title)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ICW)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.LastReleased)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.UpdateStatus)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TestResults)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TestDate)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Reason)
                        </td>

                        <td>
                            <a id="linkEditInfo" asp-page="./Edit" asp-route-id="@item.ID" asp-route-path="">Edit</a>
                            <a id="linkDetailInfo" asp-page="./Details" asp-route-id="@item.ID">Details</a>
                            <a id="linkDeleteInfo" asp-page="./Delete" asp-route-id="@item.ID">Delete</a>
                        </td>
                    </tr>
                    }
                </tbody>
            </table>
            <p style="visibility:hidden">`3`</p>
        </section>
        <section id="Failed" class="tab-panel">

            <!-- Table 2 -->
            <table class="table">
                <thead>
                    <tr>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].Server)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].KBID)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].MSRCSeverity)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].Classification)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].Title)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].ICW)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].LastReleased)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].UpdateStatus)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].TestResults)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].TestDate)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Info[0].Reason)
                        </th>

                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.Info.Where(x => x.TestResults == "Failed").OrderBy(z => z.Server).ThenBy(x => x.TestResults).ThenByDescending(y => y.TestDate))
                    {

                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Server)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.KBID)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.MSRCSeverity)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Classification)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Title)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ICW)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.LastReleased)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.UpdateStatus)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TestResults)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TestDate)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Reason)
                        </td>

                        <td>
                            <a id="linkEditInfoFail" asp-page="./Edit" asp-route-id="@item.ID">Edit</a>
                            <a id="linkDetailInfoFail" asp-page="./Details" asp-route-id="@item.ID">Details</a>
                            <a id="linkDeleteInfoFail" asp-page="./Delete" asp-route-id="@item.ID">Delete</a>
                        </td>
                    </tr>
                    }
                </tbody>
            </table>
        </section>
    </div>

</div>


<script>

    var btn = document.getElementById('clear');

    btn.onclick = function () {
        document.getElementById("testresult").value = "All";
        document.getElementById("kbid").value = "";
        document.getElementById("date").value = "";
        document.getElementById("icw").value = "";
        document.getElementById("server").value = "All";
    }

</script>